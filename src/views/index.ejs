<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src https://cdn.jsdelivr.net 'unsafe-inline'; style-src https://cdn.jsdelivr.net 'unsafe-inline'; base-uri 'self';">
    <title>Exif Fetcher üñºÔ∏è</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
        crossorigin="anonymous">
    <style>
        .wrapper {
            margin: 3em auto;
            width: 80%;
        }
        .wrapper button {
            margin: 1em auto;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <h1>Exif Fetcher üñºÔ∏è</h1>
    <form method="POST" action="/">
        <div class="form-group">
          <label for="url">Image URL</label>
          <input type="text" class="form-control" name="url">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
        <% if (typeof error !== 'undefined') { %>
        <div class="form-group">
          <p><b>Error</b></p>
          <pre><%= error %></pre>
        </div>   
        <% } %>
        <% if (typeof exifData !== 'undefined') { %>
        <div class="form-group">
          <table>
            <thead>
              <tr>
                <th>Key</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
            <script>
              const jsonData = <%- JSON.stringify(exifData) %>;
              const flag = <%- JSON.stringify(flagContent) %>
              console.log(jsonData)
              console.log(flag)
              Object.keys(jsonData).forEach(function(key) {
                var value = jsonData[key];
                document.write('<tr><td>' + key + '</td><td>' + JSON.stringify(value) + '</td></tr>');
              });
              document.write('<tr><td>Flag</td><td>' + flag + '</td></tr>');
            </script>
          </tbody>
        </table>
        </div>
        <% } %>
      </form>
</div>
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
    crossorigin="anonymous">
</script>
</body>
</html>
